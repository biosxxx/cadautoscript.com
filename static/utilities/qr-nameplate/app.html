<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QR Nameplate Generator - CAD AutoScript</title>

  <!-- Lightweight utilities (no build step). If you prefer, you can remove Tailwind and keep only styles.css. -->
  <script src="../../vendor/tailwindcss.js"></script>

  <link rel="stylesheet" href="./styles.css" />

  <!-- QR generator -->
  <script src="../../vendor/qrcode.min.js"></script>

  <!-- ES module shim for import maps (Three.js) -->
  <script async src="../../vendor/es-module-shims.js"></script>
  <script type="importmap">
    {
      "imports": {
        "three": "../../vendor/three.module.js",
        "three/addons/controls/OrbitControls.js": "../../vendor/OrbitControls.js",
        "three/addons/loaders/RGBELoader.js": "../../vendor/RGBELoader.js",
        "three/addons/": "../../vendor/",
        "@babel/runtime/helpers/typeof": "../../vendor/babel-typeof.js",
        "@babel/runtime/helpers/slicedToArray": "../../vendor/babel-slicedToArray.js",
        "fast-png": "../../vendor/fast-png/index.js",
        "iobuffer": "../../vendor/iobuffer/IOBuffer.js",
        "pako": "../../vendor/pako.esm.js",
        "fflate": "../../vendor/fflate.js"
      }
    }
  </script>
</head>

<body class="cas-app">
  <div class="cas-shell">
    <header class="cas-topbar">
      <div class="cas-topbar__title">
        <div class="cas-eyebrow">CAD AutoScript</div>
        <h1>QR Nameplate Generator</h1>
        <p class="cas-subtitle">Design a QR-enabled nameplate with 3D preview and a downloadable PDF report.</p>
      </div>
      <div class="cas-topbar__actions">
        <a class="cas-link" href="https://cadautoscript.com" target="_blank" rel="noopener">cadautoscript.com</a>
      </div>
    </header>

    <main class="cas-grid">
      <section class="cas-card cas-card--form">
        <div class="cas-card__header">
          <h2>Parameters</h2>
          <p>All units are in millimeters (mm).</p>
        </div>

        <div class="cas-card__body cas-stack">
          <div>
            <label for="plaque-text">Engraving text</label>
            <input type="text" id="plaque-text" class="form-input" value="CAD AutoScript"
              placeholder="Enter engraving text" />
            <div class="hint">Text is auto-fit to the texture width.</div>
          </div>

          <div>
            <label for="qr-url">QR link</label>
            <input type="url" id="qr-url" class="form-input" value="https://cadautoscript.com"
              placeholder="https://cadautoscript.com" />
            <div class="hint">Default is the CAD AutoScript website.</div>
          </div>

          <div class="cas-divider"></div>

          <div class="cas-grid-2">
            <div>
              <label for="plaque-width">Width (mm)</label>
              <input type="number" id="plaque-width" class="form-input-num" value="150" min="20" step="1" />
            </div>
            <div>
              <label for="plaque-height">Height (mm)</label>
              <input type="number" id="plaque-height" class="form-input-num" value="150" min="20" step="1" />
            </div>
            <div>
              <label for="plaque-depth">Thickness (mm)</label>
              <input type="number" id="plaque-depth" class="form-input-num" value="5" min="1" step="0.5" />
            </div>
            <div>
              <label for="plaque-radius">Corner radius (mm)</label>
              <input type="number" id="plaque-radius" class="form-input-num" value="5" min="0" step="0.5" />
            </div>
          </div>

          <div class="cas-grid-2 cas-grid-2--compact">
            <label class="cas-toggle" id="add-border-label" for="add-border">
              <input type="checkbox" id="add-border" />
              <span>Add border</span>
            </label>

            <label class="cas-toggle" for="auto-update">
              <input type="checkbox" id="auto-update" checked />
              <span>Auto-update 3D</span>
            </label>
          </div>

          <div>
            <label>Material</label>
            <div id="material-options" class="material-list" role="listbox" aria-label="Material">
              <button class="option-btn active" data-material="steel" type="button">Stainless steel</button>
              <button class="option-btn" data-material="copper" type="button">Copper</button>
              <button class="option-btn" data-material="black-granite" type="button">Black granite</button>
            </div>
          </div>

          <div id="validation" class="cas-validation" aria-live="polite"></div>

          <div class="cas-actions">
            <button id="generate-btn" class="generate-btn" type="button">Update 3D preview</button>
            <button id="pdf-btn" class="secondary-btn" type="button">Download PDF report</button>
          </div>

          <button id="show-drawing-btn" class="show-drawing-btn" type="button">
            View drawing preview
          </button>
        </div>
      </section>

      <section class="cas-card cas-card--preview">
        <div class="cas-card__header">
          <h2>3D preview</h2>
          <p>Orbit and zoom to inspect. This preview is for visualization only.</p>
        </div>
        <div class="cas-card__body cas-preview3d">
          <canvas id="plaque-canvas" class="cas-canvas"></canvas>
        </div>
      </section>

      <section class="cas-card cas-card--drawing" style="display:none;"></section>
    </main>

    <!-- Modal for Drawing Preview -->
    <div id="drawing-modal" class="cas-modal-overlay">
      <div class="cas-modal-content">
        <div class="cas-modal-header">
          <h3>Report drawing preview</h3>
          <button id="close-modal-btn" class="cas-close-btn" aria-label="Close modal">&times;</button>
        </div>
        <div class="cas-modal-body">
          <p style="margin-top:0; color:var(--md-sys-color-on-surface-variant); font-size:13px; margin-bottom:12px;">
            This preview is embedded into the PDF report.</p>
          <div id="drawing-preview" class="cas-drawing"></div>
        </div>
      </div>
    </div>
  </div>

  <canvas id="engraving-map-canvas" style="display:none;"></canvas>

  <script type="module" src="./scripts/main.js"></script>
</body>

</html>
